!function(){"use strict";var e=class{constructor(e,t,s,n,i){let{name:r,link:o,_id:a,isLiked:l}=e;this._name=r,this._link=o,this._handleImageClick=s,this._cardSelector=t,this.id=a,this.isLiked=l,this._handleLikeClick=i,this._handleTrashClick=n}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeClick(this)})),this._deleteButton.addEventListener("click",(()=>{this._handleTrashClick(this)})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card__list-item").cloneNode(!0)}_renderLikes(){const e=this._cardElement.querySelector(".card__button-like");this.isLiked?e.classList.add("card__button-like_active"):e.classList.remove("card__button-like_active")}updateIsLiked(e){this.isLiked=e,this._renderLikes()}handleRemoveCard(){this._cardElement.remove(),this._cardElement=null}generateCard(){return this._cardElement=this._getTemplate(),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__title"),this._likeButton=this._cardElement.querySelector(".card__button-like"),this._deleteButton=this._cardElement.querySelector(".card__button-remove"),this._renderLikes(),this._cardImage.src=this._link,this._cardImage.alt=`Image of ${this._name}`,this._cardTitle.textContent=this._name,this._setEventListeners(),this._cardElement}};class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._errorMessageEl=e.errorMessageEl,this._formElement=t,this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t?(t.textContent=e.validationMessage,t.classList.add(this._errorClass)):console.warn(`Error element for ${e.id} not found.`)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t?t.textContent="":console.warn(`Error element for ${e.id} not found.`)}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}toggleButtonState(){if(this._hasInvalidInput())return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_checkInputValidity(e,t){e.validity.valid?this._hideInputError(e,t):this._showInputError(e)}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e,this._formElement),this.toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputElements.forEach((e=>{this._hideInputError(e)})),this.toggleButtonState()}}class s{constructor(e){this._popupElement=document.querySelector(e),this._open=this.open.bind(this),this._close=this.close.bind(this),this._handleEscClose=this.handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("modal_opened")&&this.close()})),this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>{this.close()}))}}var n=class extends s{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._submitButton=this._popupElement.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}close(){this._popupForm.reset(),super.close()}_getInputValues(){return this._inputList=this._popupElement.querySelectorAll(".modal__input"),this._inputValues={},this._inputList.forEach((e=>{this._inputValues[e.name]=e.value})),this._inputValues}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{this._handleFormSubmit(this._getInputValues())}))}submitButtonState(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:this._submitButtonText}};class i{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}render(){this._items.forEach((e=>{this._renderer(e)}))}setItems(e){this._items=e||[],this.render()}addItem(e){this._container.prepend(e)}}const r={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",errorMessageEl:".modal__error"},o=document.querySelector("#profile-edit-button"),a=document.querySelector("#profile-edit-modal"),l=a.querySelector(".modal__close"),c=document.querySelector("#preview-image-modal"),d=c.querySelector(".modal__close"),u=document.querySelector("#add-card-modal"),h=u.querySelector(".modal__close"),_=document.querySelector("#profile-title-input"),m=document.querySelector("#profile-description-input"),p=document.querySelector(".profile__add-button"),E=u.querySelector(".modal__form"),v=(E.querySelector("#form-input-url"),E.querySelector("#form-input-title"),document.querySelector(".cards__list"),document.querySelector("#add-card-form")),S=document.querySelector("#edit-card-form"),b=document.querySelector("#avatar-form"),f=document.querySelector(".profile__image"),k=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getAllData(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then((e=>this._checkResponse(e)))}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>this._checkResponse(e)))}addCard(e){let{title:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._checkResponse)}updateEditProfile(e){let{name:t,about:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}unlikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}updateAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",body:JSON.stringify({avatar:e.link}),headers:this._headers}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"c11a15fc-f59e-4aaf-ae30-dd9265e1fb3a","Content-Type":"application/json"}});let g;Promise.all([k.getUserInfo(),k.getInitialCards()]).then((e=>{let[t,s]=e;console.log(t),w.setUserInfo(t),f.src=t.avatar,g=new i({items:s,renderer:U},".cards__list"),g.setItems(s)})).catch((e=>{console.log(e)}));const y=new n("#profile-edit-modal",(function(e){y.submitButtonState(!0,"Saving..."),k.updateEditProfile(e).then((e=>{w.setUserInfo(e),y.close()})).catch((e=>{console.log(e)})).finally((()=>{y.submitButtonState(!1)}))}),T);y.setEventListeners();const L=new n("#add-card-modal",(function(e){L.submitButtonState(!0,"Saving..."),k.addCard(e).then((e=>{U(e)})).then((()=>{L.close()})).catch((e=>{console.log(e)})).finally((()=>{L.submitButtonState(!1)}))}));L.setEventListeners();const C=new class extends s{constructor(e){super(e),this._popupImage=this._popupElement.querySelector(".modal__image"),this._popupTitle=this._popupElement.querySelector(".modal__title")}open(e){let{name:t,link:s}=e;this._popupImage.src=s,this._popupImage.alt=t,this._popupTitle.textContent=t,super.open()}}("#preview-image-modal");function q(e,t){C.open({name:e,link:t})}C.setEventListeners(),new t(r,S).enableValidation();const I=new t(r,v);I.enableValidation();const B=new t(r,b);B.enableValidation();const w=new class{constructor(e){let{nameSelector:t,jobSelector:s,userAvatar:n}=e;this._nameElement=document.querySelector(t),this._aboutElement=document.querySelector(s),this._userAvatar=document.querySelector(n)}getUserInfo(){return{name:this._nameElement.textContent,job:this._aboutElement.textContent}}setUserInfo(e){let{name:t,about:s}=e;this._nameElement.textContent=t,this._aboutElement.textContent=s}setAvatar(e){this._userAvatar.src=e}}({nameSelector:".profile__title",jobSelector:".profile__description",userAvatar:".profile__image"});function U(t){const s=new e(t,"#card-template",q,A,$);g.addItem(s.generateCard())}const x=new n("#avatar-modal",T);function T(e){x.submitButtonState(!0,"Saving..."),k.updateAvatar(e).then((e=>{w.setUserInfo(e),x.close()})).catch((e=>{console.log(e)})).finally((()=>{x.submitButtonState(!1)}))}function $(e){e.isLiked?k.unlikeCard(e.id).then((()=>{e.updateIsLiked(!1)})):k.likeCard(e.id).then((()=>{e.updateIsLiked(!0)})).catch((e=>{console.log(e)}))}x.setEventListeners(),document.querySelector(".avatar__edit_button").addEventListener("click",(()=>{B.toggleButtonState(),x.open()}));const V=new class extends s{constructor(e){let{popupSelector:t}=e;super(t),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupElement.querySelector(".modal__button"),this._submitButtonText=this._submitButton.textContent}submitButtonState(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Deleting...";this._submitButton.textContent=e?t:this._submitButtonText}setSubmitCallback(e){this._deleteHandler=e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._deleteHandler()}))}}({popupSelector:"#delete-card-modal"});function A(e){V.open(),V.setSubmitCallback((()=>{k.deleteCard(e.id).then((()=>{e.handleRemoveCard(),V.close()})).catch((e=>{console.log(e)}))}))}function R(e){e.target.classList.contains("modal_opened")&&C.close()}V.setEventListeners(),o.addEventListener("click",(()=>{const e=w.getUserInfo();_.value=e.name,m.value=e.job,y.open()})),p.addEventListener("click",(()=>{I.resetValidation(),I.toggleButtonState(),L.open()})),l.addEventListener("click",(()=>{y.close()})),d.addEventListener("click",(()=>{C.close()})),a.addEventListener("mousedown",R),u.addEventListener("mousedown",R),c.addEventListener("mousedown",R),h.addEventListener("click",(()=>L.close()))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QjFHLGlCQUFpQixZQUFhOEwsR0FDL0NoRixFQUFhOUcsaUJBQWlCLFlBQWE4TCxHQUMzQ2xGLEVBQWtCNUcsaUJBQWlCLFlBQWE4TCxHQUdoRC9FLEVBQXdCL0csaUJBQWlCLFNBQVMsSUFBTXdLLEVBQWF0RyxTIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhcmQge1xuXHRjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmssIF9pZCwgaXNMaWtlZH0gLCBcblx0XHRjYXJkU2VsZWN0b3IsIFxuXHRcdGhhbmRsZUltYWdlQ2xpY2ssXG5cdFx0aGFuZGxlVHJhc2hDbGljayxcblx0XHRoYW5kbGVMaWtlQ2xpY2ssXG5cdFx0KSB7XG5cdFx0dGhpcy5fbmFtZSA9IG5hbWU7XG5cdFx0dGhpcy5fbGluayA9IGxpbms7XG5cdFx0dGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG5cdFx0dGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuXHRcdHRoaXMuaWQgPSBfaWQ7XG5cdFx0dGhpcy5pc0xpa2VkID0gaXNMaWtlZDtcblx0XHR0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG5cdFx0dGhpcy5faGFuZGxlVHJhc2hDbGljayA9IGhhbmRsZVRyYXNoQ2xpY2s7XG5cdH1cblxuXHRcdC8vIGV2ZW50IGxpc3RlbmVyc1xuXHRcdF9zZXRFdmVudExpc3RlbmVycygpIHtcblx0XHRcdHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzKTtcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLl9oYW5kbGVUcmFzaENsaWNrKHRoaXMpO1xuXHRcdFx0fSk7XG5cdFx0XHR0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0Ly8gY2FyZCB0ZW1wbGF0ZVxuXHRfZ2V0VGVtcGxhdGUoKSB7XG5cdFx0Y29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuXHRcdFx0LmNvbnRlbnRcblx0XHRcdC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpc3QtaXRlbVwiKVxuXHRcdFx0LmNsb25lTm9kZSh0cnVlKTtcblxuXHRcdHJldHVybiBjYXJkRWxlbWVudDtcblx0fVxuXG5cdF9yZW5kZXJMaWtlcygpIHtcblx0XHRjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2J1dHRvbi1saWtlJyk7XG5cdFx0aWYgKHRoaXMuaXNMaWtlZCkge1xuXHRcdFx0bGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXJkX19idXR0b24tbGlrZV9hY3RpdmUnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkX19idXR0b24tbGlrZV9hY3RpdmUnKTtcblx0XHR9XG5cdH1cblxuXHR1cGRhdGVJc0xpa2VkKGlzTGlrZWQpIHtcblx0XHR0aGlzLmlzTGlrZWQgPSBpc0xpa2VkO1xuXHRcdHRoaXMuX3JlbmRlckxpa2VzKCk7XG5cdH1cblxuXG5cblx0aGFuZGxlUmVtb3ZlQ2FyZCgpIHtcblx0XHR0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcblx0XHR0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG5cdH1cblxuXG5cdGdlbmVyYXRlQ2FyZCgpIHtcblx0XHR0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG5cblx0XHR0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcblx0XHR0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKTtcblx0XHR0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2J1dHRvbi1saWtlJyk7XG5cdFx0dGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2J1dHRvbi1yZW1vdmUnKTtcblx0XHR0aGlzLl9yZW5kZXJMaWtlcygpO1xuXHRcdFxuXHRcdHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuXHRcdHRoaXMuX2NhcmRJbWFnZS5hbHQgPSBgSW1hZ2Ugb2YgJHt0aGlzLl9uYW1lfWA7XG5cdFx0dGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuXHRcdHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cdFx0XG5cdFx0cmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcblx0Y29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuXHRcdHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3Rvcjtcblx0XHR0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcjtcblx0XHR0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG5cdFx0dGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcblx0XHR0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XG5cdFx0dGhpcy5fZXJyb3JNZXNzYWdlRWwgPSBjb25maWcuZXJyb3JNZXNzYWdlRWw7XG5cdFx0dGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcblx0XHR0aGlzLl9pbnB1dEVsZW1lbnRzID0gW1xuXHRcdFx0Li4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcblx0XHRdO1xuXHRcdHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG5cdFx0XHR0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxuXHRcdCk7XG5cdH1cblxuXHRfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG5cdFx0Y29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuXHRcdFx0YCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG5cdFx0KTtcblx0XHRpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuXHRcdGlmIChlcnJvck1lc3NhZ2VFbCkge1xuXHRcdFx0ZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG5cdFx0XHRlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLndhcm4oYEVycm9yIGVsZW1lbnQgZm9yICR7aW5wdXRFbGVtZW50LmlkfSBub3QgZm91bmQuYCk7XG5cdFx0fVxuXHR9XG5cblx0X2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuXHRcdGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihcblx0XHRcdGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuXHRcdCk7XG5cdFx0aW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcblx0XHRpZiAoZXJyb3JNZXNzYWdlRWwpIHtcblx0XHRcdGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gJyc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUud2FybihgRXJyb3IgZWxlbWVudCBmb3IgJHtpbnB1dEVsZW1lbnQuaWR9IG5vdCBmb3VuZC5gKTtcblx0XHR9XG5cdH1cblxuXHRfaGFzSW52YWxpZElucHV0KCkge1xuXHRcdHJldHVybiAhdGhpcy5faW5wdXRFbGVtZW50cy5ldmVyeShcblx0XHRcdChpbnB1dEVsZW1lbnQpID0+IGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxuXHRcdCk7XG5cdH1cblxuXHR0b2dnbGVCdXR0b25TdGF0ZSgpIHtcblx0XHRpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcblx0XHRcdHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuXHRcdFx0dGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG5cdFx0dGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG5cdH1cblxuXHRfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCwgZm9ybUVscykge1xuXHRcdGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG5cdFx0XHR0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGZvcm1FbHMpO1xuXHRcdH1cblx0fVxuXG5cdF9zZXRFdmVudExpc3RlbmVycygpIHtcblx0XHR0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuXHRcdFx0aW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50LCB0aGlzLl9mb3JtRWxlbWVudCk7XG5cdFx0XHRcdHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0ZW5hYmxlVmFsaWRhdGlvbigpIHtcblx0XHR0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH0pO1xuXHRcdHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cdH1cblxuXHRyZXNldFZhbGlkYXRpb24oKSB7XG5cdFx0dGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcblx0XHRcdHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG5cdFx0fSk7XG5cdFx0dGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuXHR9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9vcGVuID0gdGhpcy5vcGVuLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2Nsb3NlID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuaGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbW9kYWxfb3BlbmVkJyk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbF9vcGVuZWQnKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBoYW5kbGVFc2NDbG9zZShlKSB7XG4gICAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kYWxfb3BlbmVkJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Zvcm0nKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2J1dHRvbicpO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICB9XG5cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWxfX2lucHV0Jyk7XG4gICAgICAgIHRoaXMuX2lucHV0VmFsdWVzID0ge307XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgICAgICB0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0VmFsdWVzO1xuICAgICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN1Ym1pdEJ1dHRvblN0YXRlKHN1Ym1pdCwgYnV0dG9uVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcbiAgICAgICAgaWYgKHN1Ym1pdCkge1xuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gYnV0dG9uVGV4dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHNldEl0ZW1zKGl0ZW1zKSB7XG4gICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zIHx8IFtdO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG4gIFxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gICAgfVxuXG4gIH0iLCJcbiAgZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgZm9ybVNlbGVjdG9yOiAnLm1vZGFsX19mb3JtJyxcbiAgICAgICAgaW5wdXRTZWxlY3RvcjogJy5tb2RhbF9faW5wdXQnLFxuICAgICAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5tb2RhbF9fYnV0dG9uJyxcbiAgICAgICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ21vZGFsX19idXR0b25fZGlzYWJsZWQnLFxuICAgICAgICBpbnB1dEVycm9yQ2xhc3M6ICdtb2RhbF9faW5wdXRfdHlwZV9lcnJvcicsXG4gICAgICAgIGVycm9yQ2xhc3M6ICdtb2RhbF9fZXJyb3JfdmlzaWJsZScsXG4gICAgICAgIGVycm9yTWVzc2FnZUVsOiAnLm1vZGFsX19lcnJvcicsXG4gICAgfTtcblxuICAgIC8vIGVkaXQgcHJvZmlsZVxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2ZpbGUtZWRpdC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2ZpbGUtZWRpdC1tb2RhbCcpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Q2xvc2VCdXR0b24gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fY2xvc2UnKTtcblxuLy8gcHJldmlld1xuZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByZXZpZXctaW1hZ2UtbW9kYWwnKTtcbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2VNb2RhbENsb3NlQnV0dG9uID1cblx0cHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcignLm1vZGFsX19jbG9zZScpO1xuXG4vLyBhZGQgY2FyZFxuZXhwb3J0IGNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtY2FyZC1tb2RhbCcpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRNb2RhbENsb3NlQnV0dG9uID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fY2xvc2UnKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9maWxlLXRpdGxlLWlucHV0Jyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuXHQnI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXQnXG4pO1xuZXhwb3J0IGNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Zvcm0nKTtcbmV4cG9ydCBjb25zdCBjYXJkVXJsSW5wdXQgPSBhZGRDYXJkRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcignI2Zvcm0taW5wdXQtdXJsJyk7XG5leHBvcnQgY29uc3QgY2FyZFRpdGxlSW5wdXQgPSBhZGRDYXJkRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcignI2Zvcm0taW5wdXQtdGl0bGUnKTtcblxuLy8gdGVtcGxhdGVcbmV4cG9ydCBjb25zdCBjYXJkTGlzdEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19saXN0Jyk7XG5cbmV4cG9ydCBjb25zdCBhZGRGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQtY2FyZC1mb3JtJyk7XG5leHBvcnQgY29uc3QgZWRpdEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VkaXQtY2FyZC1mb3JtJyk7XG5leHBvcnQgY29uc3QgYXZhdGFyRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXZhdGFyLWZvcm0nKTtcbi8vIGNvbnN0IGF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hdmF0YXJfX2VkaXRfYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZVBpY3R1cmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW1hZ2UnKTtcbiIsImltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcbmltcG9ydCAnLi4vcGFnZXMvaW5kZXguY3NzJztcbmltcG9ydCBQb3B1cENvbmZpcm1hdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyc7XG5pbXBvcnQgeyBcblx0Y29uZmlnLCBcblx0ZWRpdEZvcm1FbGVtZW50LCBcblx0YWRkRm9ybUVsZW1lbnQsIFxuXHRhdmF0YXJGb3JtRWxlbWVudCwgXG5cdHByb2ZpbGVFZGl0QnV0dG9uLCBcblx0cHJvZmlsZVRpdGxlSW5wdXQsIFxuXHRwcm9maWxlRGVzY3JpcHRpb25JbnB1dCwgXG5cdHByb2ZpbGVFZGl0Q2xvc2VCdXR0b24sIFxuXHRwcmV2aWV3SW1hZ2VNb2RhbENsb3NlQnV0dG9uLCBcblx0cHJvZmlsZUVkaXRNb2RhbCwgXG5cdGFkZENhcmRNb2RhbCwgXG5cdHByZXZpZXdJbWFnZU1vZGFsLCBcblx0YWRkTmV3Q2FyZEJ1dHRvbiwgXG5cdGFkZENhcmRNb2RhbENsb3NlQnV0dG9uLCBcblx0cHJvZmlsZVBpY3R1cmUgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xuXG4vL1xuLy8gQVBJXG4vL1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcblx0YmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuXHRoZWFkZXJzOiB7XG5cdFx0YXV0aG9yaXphdGlvbjogXCJjMTFhMTVmYy1mNTllLTRhYWYtYWUzMC1kZDkyNjVlMWZiM2FcIixcblx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcblx0fVxufSk7XG5cbmxldCBjYXJkU2VjdGlvbjtcblxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxuICAudGhlbigoW2RhdGEsIGluaXRpYWxDYXJkc10pID0+IHtcblx0Y29uc29sZS5sb2coZGF0YSk7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XG5cdHByb2ZpbGVQaWN0dXJlLnNyYyA9IGRhdGEuYXZhdGFyO1xuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAgICB7XG4gICAgICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgICAgIHJlbmRlcmVyOiBjcmVhdGVDYXJkLFxuICAgICAgfSxcbiAgICAgICcuY2FyZHNfX2xpc3QnXG4gICAgKTtcbiAgICBjYXJkU2VjdGlvbi5zZXRJdGVtcyhpbml0aWFsQ2FyZHMpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gIH0pO1xuXG4vLyAgXG4vLyBQb3B1cFdpdGhGb3Jtc1xuLy8gIFxuXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG5cdCcjcHJvZmlsZS1lZGl0LW1vZGFsJyxcblx0aGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQsXG5cdGhhbmRsZUF2YXRhckZvcm1TdWJtaXRcbik7XG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuXHQnI2FkZC1jYXJkLW1vZGFsJyxcblx0aGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXRcbik7XG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuXG4vLyAgXG4vLyBJbWFnZSBQcmV2aWV3IFBvcHVwXG4vLyAgXG5cbmNvbnN0IHBvcHVwSW1hZ2VNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnI3ByZXZpZXctaW1hZ2UtbW9kYWwnKTtcbnBvcHVwSW1hZ2VNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcblx0cG9wdXBJbWFnZU1vZGFsLm9wZW4oeyBuYW1lLCBsaW5rIH0pO1xufVxuXG4vLyAgXG4vLyBGb3JtIFZhbGlkYXRpb25cbi8vICBcblxuY29uc3QgYWRkRWRpdFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZWRpdEZvcm1FbGVtZW50KTtcbmFkZEVkaXRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBhZGRDYXJkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBhZGRGb3JtRWxlbWVudCk7XG5hZGRDYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgdXBkYXRlQXZhdGFyVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBhdmF0YXJGb3JtRWxlbWVudCk7XG51cGRhdGVBdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vLyAgXG4vLyBVc2VyIEluZm9cbi8vICBcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuXHRuYW1lU2VsZWN0b3I6ICcucHJvZmlsZV9fdGl0bGUnLFxuXHRqb2JTZWxlY3RvcjogJy5wcm9maWxlX19kZXNjcmlwdGlvbicsXG5cdHVzZXJBdmF0YXI6ICcucHJvZmlsZV9faW1hZ2UnLFxufSk7XG5cbi8vIFxuLy8gRnVuY3Rpb25zXG4vLyAgXG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcblx0Y29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuXHRcdGNhcmREYXRhLFxuXHRcdCcjY2FyZC10ZW1wbGF0ZScsXG5cdFx0aGFuZGxlSW1hZ2VDbGljayxcblx0XHRoYW5kbGVUcmFzaENsaWNrLFxuXHRcdGhhbmRsZUxpa2VDbGljayxcblx0KTtcblx0Y2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkLmdlbmVyYXRlQ2FyZCgpKTtcbn1cblxuLy8gQUREIENBUkQgQU5EIEVESVQgUFJPRklMRVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdChkYXRhKSB7XG5cdGFkZENhcmRQb3B1cC5zdWJtaXRCdXR0b25TdGF0ZSh0cnVlLCBcIlNhdmluZy4uLlwiKTtcblx0YXBpXG5cdFx0LmFkZENhcmQoZGF0YSlcblx0XHQudGhlbigoZGF0YSkgPT4ge1xuXHRcdFx0Y3JlYXRlQ2FyZChkYXRhKTtcblx0XHR9KVxuXHRcdC50aGVuKCgpID0+IHtcblx0XHRcdGFkZENhcmRQb3B1cC5jbG9zZSgpO1xuXHRcdH0pXG5cdFx0LmNhdGNoKChlcnIpID0+IHtcblx0XHRcdGNvbnNvbGUubG9nKGVycik7XG5cdFx0fSlcblx0XHQuZmluYWxseSgoKSA9PiB7XG5cdFx0XHRhZGRDYXJkUG9wdXAuc3VibWl0QnV0dG9uU3RhdGUoZmFsc2UpO1xuXHRcdH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdChkYXRhKSB7XG5cdGVkaXRQcm9maWxlUG9wdXAuc3VibWl0QnV0dG9uU3RhdGUodHJ1ZSwgXCJTYXZpbmcuLi5cIik7XG5cdGFwaVxuXHQudXBkYXRlRWRpdFByb2ZpbGUoZGF0YSlcblx0XHQudGhlbigoZGF0YSkgPT4ge1xuXHRcdFx0dXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XG5cdFx0XHRlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKCk7XG5cdFx0fSlcblx0XHQuY2F0Y2goKGVycikgPT4ge1xuXHRcdFx0Y29uc29sZS5sb2coZXJyKTtcblx0XHR9KVxuXHRcdC5maW5hbGx5KCgpID0+IHtcblx0XHRcdGVkaXRQcm9maWxlUG9wdXAuc3VibWl0QnV0dG9uU3RhdGUoZmFsc2UpO1xuXHRcdH0pO1xufVxuXG4vLyAgXG4vLyAgQXZhdGFyXG4vLyAgXG5cbmNvbnN0IGF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG5cdCcjYXZhdGFyLW1vZGFsJyxcblx0aGFuZGxlQXZhdGFyRm9ybVN1Ym1pdFxuKTtcbmF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQoZGF0YSkge1xuXHRhdmF0YXJQb3B1cC5zdWJtaXRCdXR0b25TdGF0ZSh0cnVlLCBcIlNhdmluZy4uLlwiKTtcblx0YXBpXG5cdC51cGRhdGVBdmF0YXIoZGF0YSlcblx0ICAudGhlbigoZGF0YSkgPT4ge1xuXHRcdHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuXHRcdGF2YXRhclBvcHVwLmNsb3NlKCk7XG5cdCAgfSlcblx0ICAuY2F0Y2goKGVycikgPT4ge1xuXHRcdGNvbnNvbGUubG9nKGVycik7XG5cdCAgfSlcblx0ICAuZmluYWxseSgoKSA9PiB7XG5cdFx0YXZhdGFyUG9wdXAuc3VibWl0QnV0dG9uU3RhdGUoZmFsc2UpO1xuXHQgIH0pO1xufVxuXG5jb25zdCBhdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmF2YXRhcl9fZWRpdF9idXR0b25cIik7XG5hdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgdXBkYXRlQXZhdGFyVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIGF2YXRhclBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vLyAgXG4vLyAgTGlrZSBDYXJkXG4vL1xuXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2xpY2soY2FyZCkge1xuICBpZiAoY2FyZC5pc0xpa2VkKSB7XG5cdGFwaVxuXHQgIC51bmxpa2VDYXJkKGNhcmQuaWQpXG5cdCAgLnRoZW4oKCkgPT4ge1xuXHRcdGNhcmQudXBkYXRlSXNMaWtlZChmYWxzZSlcblx0ICB9KTtcblx0fSBlbHNlIHtcblx0YXBpXG5cdCAgLmxpa2VDYXJkKGNhcmQuaWQpXG5cdCAgLnRoZW4oKCkgPT4ge1xuXHRcdGNhcmQudXBkYXRlSXNMaWtlZCh0cnVlKVxuXHQgIH0pXG5cdCAgLmNhdGNoKChlcnIpID0+IHtcblx0XHRjb25zb2xlLmxvZyhlcnIpO1xuXHQgIH0pO1xuICB9XG59XG5cbi8vICBcbi8vIENvbmZpcm0gRGVsZXRlIFBvcHVwXG4vL1xuY29uc3QgY29uZmlybURlbGV0ZVBvcHVwID0gbmV3IFBvcHVwQ29uZmlybWF0aW9uKHtcblx0cG9wdXBTZWxlY3RvcjogXCIjZGVsZXRlLWNhcmQtbW9kYWxcIlxuXHR9KTtcbmNvbmZpcm1EZWxldGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZVRyYXNoQ2xpY2soY2FyZCkge1xuXHRjb25maXJtRGVsZXRlUG9wdXAub3BlbigpO1xuXHRjb25maXJtRGVsZXRlUG9wdXAuc2V0U3VibWl0Q2FsbGJhY2soKCkgPT4ge1xuXHRcdGFwaVxuXHQuZGVsZXRlQ2FyZChjYXJkLmlkKVxuXHQudGhlbigoKSA9PiB7XG5cdFx0Y2FyZC5oYW5kbGVSZW1vdmVDYXJkKCk7XG5cdFx0Y29uZmlybURlbGV0ZVBvcHVwLmNsb3NlKCk7XG5cdH0pXG5cdC5jYXRjaCgoZXJyKSA9PiB7XG5cdFx0Y29uc29sZS5sb2coZXJyKTtcblx0fSk7XG5cbiAgfSk7XG59XG4gIFxuLy9cbi8vIE92ZXJsYXkgQ2xvc2Vcbi8vICBcblxuICBmdW5jdGlvbiBoYW5kbGVPdmVybGF5Q2xvc2UoZSkge1xuXHRpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RhbF9vcGVuZWQnKSkge1xuXHRcdHBvcHVwSW1hZ2VNb2RhbC5jbG9zZSgpO1xuXHR9XG59XG5cbi8vICBcbi8vIEV2ZW50IExpc3RlbmVyc1xuLy9cblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdGNvbnN0IHVzZXIgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuXHRwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHVzZXIubmFtZTtcblx0cHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VyLmpvYjtcblx0ZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XG59KTtcblxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0YWRkQ2FyZFZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcblx0YWRkQ2FyZFZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xuXHRhZGRDYXJkUG9wdXAub3BlbigpO1xufSk7XG5cblxucHJvZmlsZUVkaXRDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0ZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xufSk7XG5cbnByZXZpZXdJbWFnZU1vZGFsQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdHBvcHVwSW1hZ2VNb2RhbC5jbG9zZSgpO1xufSk7XG5cbnByb2ZpbGVFZGl0TW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlT3ZlcmxheUNsb3NlKTtcbmFkZENhcmRNb2RhbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVPdmVybGF5Q2xvc2UpO1xucHJldmlld0ltYWdlTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlT3ZlcmxheUNsb3NlKTtcblxuXG5hZGRDYXJkTW9kYWxDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGFkZENhcmRQb3B1cC5jbG9zZSgpKTtcblxuXG5cblxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7YmFzZVVybCwgaGVhZGVyc30pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICBnZXRBbGxEYXRhKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRVc2VySW5mbygpLCB0aGlzLmdldEluaXRpYWxDYXJkcygpXSk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAudGhlbihyZXMgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgLnRoZW4ocmVzID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSk7XG4gIH1cblxuICAvLyBhZGQgbmV3IGNhcmRcbiAgYWRkQ2FyZCh7IHRpdGxlLCBsaW5rIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgIG5hbWU6IHRpdGxlLCBcbiAgICAgICAgbGluazogbGluaywgfSksXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIC8vIGVkaXQgdXNlciBpbmZvXG4gIHVwZGF0ZUVkaXRQcm9maWxlKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgYWJvdXQgfSksXG4gICAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gICAgfVxuXG4gIC8vIGRlbGV0ZSBjYXJkXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gICAgfVxuXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICAgIH1cblxuICB1bmxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICAgIH1cbiAgICBcbiAgdXBkYXRlQXZhdGFyKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IFxuICAgICAgICBhdmF0YXI6IGRhdGEubGlua30pLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcblx0Y29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuXHRcdHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuXHRcdHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbWFnZScpO1xuXHRcdHRoaXMuX3BvcHVwVGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX190aXRsZScpO1xuXHR9XG5cblx0b3Blbih7IG5hbWUsIGxpbmsgfSkge1xuXHRcdHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gbGluaztcblx0XHR0aGlzLl9wb3B1cEltYWdlLmFsdCA9IG5hbWU7XG5cdFx0dGhpcy5fcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG5cdFx0c3VwZXIub3BlbigpO1xuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlO1xuIiwiY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgdXNlckF2YXRhciB9KSB7XG4gICAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICAgIHRoaXMuX2Fib3V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICAgICAgdGhpcy5fdXNlckF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckF2YXRhcik7XG4gICAgfVxuICBcbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgICBqb2I6IHRoaXMuX2Fib3V0RWxlbWVudC50ZXh0Q29udGVudFxuICAgICAgfTtcbiAgICB9XG4gIFxuICAgIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgdGhpcy5fYWJvdXRFbGVtZW50LnRleHRDb250ZW50ID0gYWJvdXQ7XG4gICAgfVxuXG4gICAgc2V0QXZhdGFyKGF2YXRhcikge1xuICAgICAgdGhpcy5fdXNlckF2YXRhci5zcmMgPSBhdmF0YXI7XG4gICAgfVxuICB9XG4gIFxuICBleHBvcnQgZGVmYXVsdCBVc2VySW5mbzsiLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcih7cG9wdXBTZWxlY3Rvcn0pIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIC8vIHRoaXMuX2RlbGV0ZUhhbmRsZXIgPSBkZWxldGVIYW5kbGVyO1xuICAgICAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19mb3JtJyk7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2J1dHRvbicpO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuICAgIH1cblxuICAgIC8vIGdldENhcmRJbmZvKGNhcmRFbGVtZW50LCBjYXJkSWQsIGNhcmQpIHtcbiAgICAvLyAgICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBjYXJkRWxlbWVudDtcbiAgICAvLyAgICAgdGhpcy5fY2FyZElkID0gY2FyZElkO1xuICAgIC8vICAgICB0aGlzLl9jYXJkID0gY2FyZDtcbiAgICAvLyB9XG5cbiAgICBzdWJtaXRCdXR0b25TdGF0ZShzdWJtaXQsIGJ1dHRvblRleHQgPSBcIkRlbGV0aW5nLi4uXCIpIHtcbiAgICAgICAgaWYgKHN1Ym1pdCkge1xuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gYnV0dG9uVGV4dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRTdWJtaXRDYWxsYmFjayhjYWxsYmFjaykge1xuICAgICAgICB0aGlzLl9kZWxldGVIYW5kbGVyID0gY2FsbGJhY2s7XG4gICAgfVxuICAgIFxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuX2RlbGV0ZUhhbmRsZXIoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gZGVsZXRlQ29uZmlybWVkKGNhcmRFbGVtZW50LCBjYXJkSWQsIGNhcmQpIHtcbiAgICAvLyAgICAgdGhpcy5fZGVsZXRlSGFuZGxlcihjYXJkRWxlbWVudCwgY2FyZElkLCBjYXJkKTtcbiAgICAvLyB9XG5cbn0iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZVRyYXNoQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJuYW1lIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2NhcmRTZWxlY3RvciIsImlkIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVUcmFzaENsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUJ1dHRvbiIsIl9jYXJkSW1hZ2UiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3JlbmRlckxpa2VzIiwibGlrZUJ1dHRvbiIsIl9jYXJkRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInVwZGF0ZUlzTGlrZWQiLCJoYW5kbGVSZW1vdmVDYXJkIiwiZ2VuZXJhdGVDYXJkIiwiX2NhcmRUaXRsZSIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Vycm9yTWVzc2FnZUVsIiwiZXJyb3JNZXNzYWdlRWwiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJjb25zb2xlIiwid2FybiIsIl9oaWRlSW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJldmVyeSIsInZhbGlkaXR5IiwidmFsaWQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImZvcm1FbHMiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfb3BlbiIsIm9wZW4iLCJiaW5kIiwiX2Nsb3NlIiwiY2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJoYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3N1Ym1pdEJ1dHRvblRleHQiLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9pbnB1dExpc3QiLCJfaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwic3VibWl0QnV0dG9uU3RhdGUiLCJzdWJtaXQiLCJidXR0b25UZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXIiLCJpdGVtIiwic2V0SXRlbXMiLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJmb3JtU2VsZWN0b3IiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlRWRpdENsb3NlQnV0dG9uIiwicHJldmlld0ltYWdlTW9kYWwiLCJwcmV2aWV3SW1hZ2VNb2RhbENsb3NlQnV0dG9uIiwiYWRkQ2FyZE1vZGFsIiwiYWRkQ2FyZE1vZGFsQ2xvc2VCdXR0b24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwiYWRkTmV3Q2FyZEJ1dHRvbiIsImFkZENhcmRGb3JtRWxlbWVudCIsImFkZEZvcm1FbGVtZW50IiwiZWRpdEZvcm1FbGVtZW50IiwiYXZhdGFyRm9ybUVsZW1lbnQiLCJwcm9maWxlUGljdHVyZSIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEFsbERhdGEiLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsImFkZENhcmQiLCJfcmVmMiIsInRpdGxlIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1cGRhdGVFZGl0UHJvZmlsZSIsIl9yZWYzIiwiYWJvdXQiLCJkZWxldGVDYXJkIiwiY2FyZElkIiwibGlrZUNhcmQiLCJ1bmxpa2VDYXJkIiwidXBkYXRlQXZhdGFyIiwiZGF0YSIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJjYXJkU2VjdGlvbiIsImluaXRpYWxDYXJkcyIsImxvZyIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJjcmVhdGVDYXJkIiwiY2F0Y2giLCJlcnIiLCJlZGl0UHJvZmlsZVBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsImZpbmFsbHkiLCJoYW5kbGVBdmF0YXJGb3JtU3VibWl0IiwiYWRkQ2FyZFBvcHVwIiwicG9wdXBJbWFnZU1vZGFsIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBUaXRsZSIsImFkZENhcmRWYWxpZGF0b3IiLCJ1cGRhdGVBdmF0YXJWYWxpZGF0b3IiLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsInVzZXJBdmF0YXIiLCJfbmFtZUVsZW1lbnQiLCJfYWJvdXRFbGVtZW50IiwiX3VzZXJBdmF0YXIiLCJqb2IiLCJzZXRBdmF0YXIiLCJjYXJkRGF0YSIsImNhcmQiLCJDYXJkIiwiYXZhdGFyUG9wdXAiLCJjb25maXJtRGVsZXRlUG9wdXAiLCJzZXRTdWJtaXRDYWxsYmFjayIsImNhbGxiYWNrIiwiX2RlbGV0ZUhhbmRsZXIiLCJoYW5kbGVPdmVybGF5Q2xvc2UiLCJ1c2VyIl0sInNvdXJjZVJvb3QiOiIifQ==